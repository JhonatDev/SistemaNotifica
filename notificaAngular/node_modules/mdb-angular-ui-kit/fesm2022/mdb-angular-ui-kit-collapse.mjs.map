{"version":3,"file":"mdb-angular-ui-kit-collapse.mjs","sources":["../../../projects/mdb-angular-ui-kit/collapse/collapse.directive.ts","../../../projects/mdb-angular-ui-kit/collapse/collapse.module.ts","../../../projects/mdb-angular-ui-kit/collapse/mdb-angular-ui-kit-collapse.ts"],"sourcesContent":["import {\n  Directive,\n  ElementRef,\n  EventEmitter,\n  HostBinding,\n  Input,\n  Output,\n  Renderer2,\n} from '@angular/core';\nimport { fromEvent } from 'rxjs';\nimport { take } from 'rxjs/operators';\n\nconst TRANSITION_TIME = 350;\n\n@Directive({\n  // eslint-disable-next-line @angular-eslint/directive-selector\n  selector: '[mdbCollapse]',\n  exportAs: 'mdbCollapse',\n})\n// eslint-disable-next-line @angular-eslint/component-class-suffix\nexport class MdbCollapseDirective {\n  constructor(private _elementRef: ElementRef, private _renderer: Renderer2) {}\n\n  @HostBinding('class.collapse') collapseClass = true;\n\n  @Output() collapseShow: EventEmitter<MdbCollapseDirective> = new EventEmitter();\n  @Output() collapseShown: EventEmitter<MdbCollapseDirective> = new EventEmitter();\n  @Output() collapseHide: EventEmitter<MdbCollapseDirective> = new EventEmitter();\n  @Output() collapseHidden: EventEmitter<MdbCollapseDirective> = new EventEmitter();\n\n  @Input()\n  set collapsed(collapsed: boolean) {\n    if (collapsed !== this._collapsed) {\n      collapsed ? this.hide() : this.show();\n      this._collapsed = collapsed;\n    }\n  }\n  get collapsed(): boolean {\n    return this._collapsed;\n  }\n  private _collapsed = true;\n\n  get host(): HTMLElement {\n    return this._elementRef.nativeElement;\n  }\n\n  private _isTransitioning = false;\n\n  show(): void {\n    if (this._isTransitioning || !this.collapsed) {\n      return;\n    }\n\n    this.collapseShow.emit(this);\n\n    this._renderer.removeClass(this.host, 'collapse');\n    this._renderer.addClass(this.host, 'collapsing');\n\n    this._renderer.setStyle(this.host, 'height', '0px');\n\n    this._isTransitioning = true;\n\n    const scrollHeight = this.host.scrollHeight;\n\n    fromEvent(this.host, 'transitionend')\n      .pipe(take(1))\n      .subscribe(() => {\n        this._isTransitioning = false;\n        this.collapsed = false;\n        this._renderer.removeClass(this.host, 'collapsing');\n        this._renderer.addClass(this.host, 'collapse');\n        this._renderer.addClass(this.host, 'show');\n\n        this._renderer.removeStyle(this.host, 'height');\n\n        this.collapseShown.emit(this);\n      });\n\n    this._emulateTransitionEnd(this.host, TRANSITION_TIME);\n\n    this._renderer.setStyle(this.host, 'height', `${scrollHeight}px`);\n  }\n\n  hide(): void {\n    if (this._isTransitioning || this.collapsed) {\n      return;\n    }\n\n    this.collapseHide.emit(this);\n\n    const hostHeight = this.host.getBoundingClientRect().height;\n\n    this._renderer.setStyle(this.host, 'height', `${hostHeight}px`);\n\n    this._reflow(this.host);\n\n    this._renderer.addClass(this.host, 'collapsing');\n    this._renderer.removeClass(this.host, 'collapse');\n    this._renderer.removeClass(this.host, 'show');\n\n    this._isTransitioning = true;\n\n    fromEvent(this.host, 'transitionend')\n      .pipe(take(1))\n      .subscribe(() => {\n        this._renderer.removeClass(this.host, 'collapsing');\n        this._renderer.addClass(this.host, 'collapse');\n        this._isTransitioning = false;\n        this.collapsed = true;\n\n        this.collapseHidden.emit(this);\n      });\n\n    this._renderer.removeStyle(this.host, 'height');\n    this._emulateTransitionEnd(this.host, TRANSITION_TIME);\n  }\n\n  toggle(): void {\n    if (this._isTransitioning) {\n      return;\n    }\n\n    this.collapsed = !this.collapsed;\n    this.collapsed ? this.hide() : this.show();\n  }\n\n  private _reflow(element: HTMLElement): number {\n    return element.offsetHeight;\n  }\n\n  private _emulateTransitionEnd(element: HTMLElement, duration: number): void {\n    let eventEmitted = false;\n    const durationPadding = 5;\n    const emulatedDuration = duration + durationPadding;\n\n    fromEvent(element, 'transitionend')\n      .pipe(take(1))\n      .subscribe(() => {\n        eventEmitted = true;\n      });\n\n    setTimeout(() => {\n      if (!eventEmitted) {\n        element.dispatchEvent(new Event('transitionend'));\n      }\n    }, emulatedDuration);\n  }\n}\n","import { MdbCollapseDirective } from './collapse.directive';\nimport { NgModule } from '@angular/core';\n\n@NgModule({\n  declarations: [MdbCollapseDirective],\n  exports: [MdbCollapseDirective],\n})\nexport class MdbCollapseModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}